name: 'build how2heap'
description: 'build how2heap on the targeted ubuntu docker'
inputs:
  ubuntu-version:
    description: 'build it on which ubuntu version'
    required: true
runs:
  using: "composite"
  steps:
    - name: create the base docker image
      run: |
        docker pull ubuntu:${{ inputs.ubuntu-version }}
        docker tag ubuntu:${{ inputs.ubuntu-version }} base
      shell: bash

    - name: build how2heap inside the base container
      run: |
        docker clone https://github.com/Kyle-Kyle/action_test /action_test
        cd /action_test/ci/build && docker build -t runner .
        mkdir /how2heap && docker run -v /how2heap:/how2heap runner
